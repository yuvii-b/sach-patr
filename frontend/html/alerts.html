<!DOCTYPE html>
<html lang="en" class="light-style layout-menu-fixed" dir="ltr" data-theme="theme-default" data-assets-path="../assets/" data-template="vertical-menu-template-free">

<head>
  <meta charset="utf-8" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />

  <title>Higher Official Dashboard | Fake Degree Recognition System</title>

  <link rel="icon" type="image/x-icon" href="../assets/img/favicon/favicon.ico" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Public+Sans&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="../assets/vendor/fonts/boxicons.css" />
  <link rel="stylesheet" href="../assets/vendor/css/core.css" />
  <link rel="stylesheet" href="../assets/vendor/css/theme-default.css" />
  <link rel="stylesheet" href="../assets/css/demo.css" />
  <link rel="stylesheet" href="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />
  <link rel="stylesheet" href="../assets/vendor/libs/apex-charts/apex-charts.css" />

  <script src="../assets/vendor/js/helpers.js"></script>
  <script src="../assets/js/config.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&family=Playfair+Display:wght@700&family=Yeseva+One&display=swap" rel="stylesheet" />
  <style>
    .logo-text { font-family: 'UnifrakturCook', 'Playfair Display', 'Yeseva One', serif; font-weight:700; letter-spacing:1px; text-transform:none; font-size:28px; color:#0f172a; line-height:1; white-space:nowrap; }
  </style>
</head>

<body>
  <div class="layout-wrapper layout-content-navbar">
    <div class="layout-container">
                <aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
          <div class="app-brand demo">
            <a href="hed-index.html" class="app-brand-link">
              <span class="logo-text">Sachpatr</span>
            </a>

            <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto d-block d-xl-none">
              <i class="bx bx-chevron-left bx-sm align-middle"></i>
            </a>
          </div>

          <div class="menu-inner-shadow"></div>

          <ul class="menu-inner py-1">
            <!-- Dashboard -->
            <li class="menu-item">
              <a href="hed-index.html" class="menu-link">
                <i class="menu-icon tf-icons bx bx-shield-quarter"></i>
                <div data-i18n="Analytics">Dashboard</div>
              </a>
            </li>

            <!-- Layouts -->
            <li class="menu-item active">
              <a href="alerts.html" class="menu-link">
                <i class="menu-icon tf-icons bx bx-bell"></i>
                <div data-i18n="Layouts">Alerts</div>
              </a>
            </li>
            <li class="menu-item">
              <a href="blacklist.html" class="menu-link">
                <i class="menu-icon tf-icons bx bx-user-x"></i>
                <div data-i18n="Layouts">Blacklist User</div>
              </a>
            </li>
            
          </ul>
        </aside>

      <div class="layout-page">

        <nav class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached bg-navbar-theme">
          <div class="navbar-nav-right d-flex align-items-center">
            <h4>System Alerts</h4>
          </div>
        </nav>

        <div class="content-wrapper">
          <div class="container-xxl flex-grow-1 container-p-y">

            <div class="card mb-4">
              <h5 class="card-header">Notification Preferences</h5>
              <div class="card-body">
                <div class="form-check form-switch mb-2">
                  <input class="form-check-input" type="checkbox" id="emailNotifications" checked />
                  <label class="form-check-label" for="emailNotifications">Enable Email Notifications</label>
                </div>
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="smsNotifications" />
                  <label class="form-check-label" for="smsNotifications">Enable SMS Notifications</label>
                </div>
              </div>
            </div>

            <div class="card">
              <h5 class="card-header">Recent Alerts</h5>
              <div class="card-body">
                <ul id="hed-alerts" class="list-group"></ul>
              </div>
            </div>

          </div>

          <footer class="content-footer footer bg-footer-theme">
            <div class="container-xxl d-flex justify-content-between py-2">
              Â© <script>document.write(new Date().getFullYear());</script>, Government of Jharkhand
            </div>
          </footer>
        </div>

      </div>

    </div>

    <div class="layout-overlay layout-menu-toggle"></div>
  </div>

  <script>
    function getLocalUploads() {
      try { const raw = localStorage.getItem('userCertificates'); return raw ? JSON.parse(raw) : []; } catch(_) { return []; }
    }
    function renderHedAlerts() {
      const el = document.getElementById('hed-alerts'); if (!el) return;
      const list = getLocalUploads();
      const items = [];
      list.slice(0, 20).forEach(item => {
        const c = item.scores?.combined ?? 0;
        if (c < 60) items.push(`<li class="list-group-item list-group-item-danger">Forgery Alert: ${item.certificateId || item.fileName}</li>`);
        else if (c < 80) items.push(`<li class="list-group-item list-group-item-warning">Review Needed: ${item.certificateId || item.fileName}</li>`);
      });
      el.innerHTML = items.join('') || '<li class="list-group-item text-muted">No alerts yet</li>';
    }
    document.addEventListener('DOMContentLoaded', () => {
      renderHedAlerts();
      window.addEventListener('storage', (e) => { if (!e || e.key === null || e.key === 'userCertificates') renderHedAlerts(); });
      window.addEventListener('focus', renderHedAlerts);
      document.addEventListener('visibilitychange', () => { if (document.visibilityState === 'visible') renderHedAlerts(); });
      setInterval(renderHedAlerts, 2000);
    });
  </script>
  <script src="assets/vendor/js/bootstrap.js"></script>
</body>
</html>
